
<!DOCTYPE html>
<html>
<head>
   <title>Quick Notes</title>
   <meta name="apple-mobile-web-app-capable" content="yes">
   <meta name="apple-mobile-web-app-status-bar-style" content="black">
   <meta name="format-detection" content="telephone=no">

   <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

   <link rel="stylesheet" href="style.css">
   <script src="http://mydev.co/leveller.js/lib/leveller.js" data-requirements="ecma5-function"></script>
   <script src="jquery-1.7.1.min.js"></script>
   <script src="note.js"></script>
   <script src="notesmodel.js"></script>
   <script src="notes.js"></script>
   <script>

      /**
       * Allow for upgrading the type of data set in localStorage - if ever the kind of data changes, it
       * should be modified before building the rest of the app.... for example, the items currently have
       * no title / date / tag support.
       */
      (function(currentVersion) {

         /* upgrade path - 0.1 to 0.2, convert to JSON */
         if(currentVersion < 0.2) {
            for(var key = '', i = 0, l = localStorage.length; i < l; i++) {
               if((key = localStorage.key(i)).match(/^note\-\d+$/)) {
                  localStorage.setItem(key, JSON.stringify(Note.build({
                     id: key,
                     content: localStorage.getItem(key),
                     date: key.replace(/\D/g, '')
                  })));
               }
            }
            currentVersion = 0.2;
         }
         localStorage.setItem('note-version', 0.2);
      }(localStorage.getItem('note-version')));

      jQuery((new Notes(new NotesModel)).init);
   </script>
</head>

<body class="showing-notes">
<div id="site-container">
   <section id="notes-list" data-body-class="showing-notes">
      <ul>
      </ul>
   </section>

   <section id="editor" data-body-class="showing-form">
      <textarea></textarea>
      <div class="buttons">
         <a href="#list" class="button cancel">cancel</a>
         <a href="#list" class="button save">save</a>
      </div>
   </section>

   <section id="sync" data-body-class="showing-sync">
      <p>Synchronise your notes, pick up new notes made on other devices and make sure you don't lose the notes you've
         made so far on this device.</p>
      <p>
         <a href="#list" class="button">Cancel</a>
         <a id="doSync" href="#" class="button">Upload</a>
         <a id="fetchSync" href="#" class="button">Download</a>
      </p>
   </section>
</div>
</body>
</html>
